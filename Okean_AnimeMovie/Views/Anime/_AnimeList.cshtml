@model IEnumerable<Okean_AnimeMovie.Core.Entities.Anime>

@if (!Model.Any())
{
    <div class="text-center py-5">
        <i class="bi bi-search display-1 text-muted"></i>
        <h4 class="mt-3">Không tìm thấy anime nào</h4>
        <p class="text-muted">Hãy thử tìm kiếm với từ khóa khác</p>
    </div>
}
else
{
    <div class="row g-4">
        @foreach (var anime in Model)
        {
            <div class="col-lg-3 col-md-4 col-sm-6">
                <div class="anime-card h-100 border-0 shadow-lg hover-lift">
                    <div class="anime-poster position-relative">
                        <img src="@anime.Poster" alt="@anime.Title" class="w-100" style="height: 300px; object-fit: cover;">
                        <div class="anime-overlay position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center">
                            <div class="anime-actions">
                                <a asp-action="Details" asp-route-id="@anime.Id" class="btn btn-primary btn-sm me-2">
                                    <i class="bi bi-eye"></i> Chi tiết
                                </a>
                                <a asp-action="Watch" asp-route-animeId="@anime.Id" asp-route-episodeNumber="1" class="btn btn-warning btn-sm">
                                    <i class="bi bi-play"></i> Xem
                                </a>
                            </div>
                        </div>
                        <div class="anime-badge position-absolute top-0 end-0 m-2">
                            <span class="badge bg-warning text-dark">@anime.Status</span>
                        </div>
                    </div>
                    <div class="anime-info p-3">
                        <h6 class="anime-title fw-bold mb-2">@anime.Title</h6>
                        <div class="anime-meta d-flex justify-content-between align-items-center mb-2">
                            <small class="text-muted">@anime.ReleaseYear</small>
                            <div class="anime-rating">
                                <i class="bi bi-star-fill text-warning"></i>
                                <small>@(anime.Ratings?.Any() == true ? anime.Ratings.Average(r => r.Score).ToString("F1") : "N/A")</small>
                            </div>
                        </div>
                        <div class="anime-genres">
                            @foreach (var genre in anime.AnimeGenres.Take(3))
                            {
                                <span class="badge bg-secondary me-1">@genre.Genre.Name</span>
                            }
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
}
